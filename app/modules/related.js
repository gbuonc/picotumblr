define(["../../assets/js/text!templates/hlist.tpl","../../assets/js/handlebars","modules/app","../../assets/js/iscroll"],function(e,t,n,r){var i=$("#rels .scrollWrapper"),s=$(e).html(),o=Handlebars.compile(s),u={scrollable:new iScroll("rels"),add:function(e){tumblr.getData(e,{showErrors:!1},function(){var t=$(n.relatedSites).pluck("id"),r=t.indexOf(e)===-1;if(r){var i={id:e,title:tumblr.sites[e].siteInfo.title,av:tumblr.sites[e].siteInfo.avatar};n.relatedSites.push(i)}})},updateHpList:function(){var e={warning:"Sorry, no related sites yet!",listItem:n.relatedSites};i.html(o(e)),setTimeout(function(){u.scrollable.refresh()},0)},clear:function(){n.relatedSites.length=0,u.updateHpList()}};return u})