define(["../../assets/js/director","modules/app","modules/tabs","views/home","views/grid","views/detail"],function(e,t,n,r,i,s){var o=$("#mainApp"),u=$("#tid"),a=$("#grid"),f=Router({"/":{on:function(){l.currentBackAnim="slidedown",l.changeView("home","slideup"),n.updateScrollable()},after:function(){setTimeout(function(){u.val("")},500)}},"/:tumblrId":{before:function(e){t.current.tumblrId===e?(t.hideLoadbar(),i.gotoPage(t.current.gridPage,e)):(a.html(""),i.init(e))},on:function(e){l.changeView("grid","slideleft"),l.currentBackAnim="slideright"}},"/:tumblrId/:imgId":{on:function(e,t){l.changeView("detail","slideleft"),s.init(e,t),l.currentBackAnim="slideright"}}}),l={currentBackAnim:"",goingBack:!1,changeView:function(e,t){var n=$(".current"),r=$(".view"),i=$("#"+e),s=l.goingBack===!0?l.currentBackAnim:t;l.goingBack=!1;if(i.hasClass("current"))return!1;(s==="slideright"||s==="slideleft"||"slideup"||"slidedown")&&n.addClass("anim "+s+" out"),i.addClass("anim "+s+" in"),o.bind("webkitAnimationEnd",function(){r.attr("class","view"),i.attr("class","current view")})}};return f})