<!doctype html>  
<html>
<head>
   <meta charset="utf-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
   <title>TEST LOCALSTORAGE</title>   
</head>
<body>
   <img src="http://api.tumblr.com/v2/blog/life.tumblr.com/avatar/512" id="elephant" />
   <script>
      // Get a reference to the image element
   var elephant = document.getElementById("elephant");
   
   // Take action when the image has loaded
   elephant.addEventListener("load", function () {
       var imgCanvas = document.createElement("canvas"),
           imgContext = imgCanvas.getContext("2d");
   
       // Make sure canvas is as big as the picture
       imgCanvas.width = elephant.width;
       imgCanvas.height = elephant.height;
   
       // Draw image into canvas element
       imgContext.drawImage(elephant, 0, 0, elephant.width, elephant.height);
   
       // Get canvas contents as a data URL
       var imgAsDataURL = imgCanvas.toDataURL("image/png");
   
       // Save image into localStorage
       try {
           localStorage.setItem("elephant", imgAsDataURL);
       }
       catch (e) {
           console.log("Storage failed: " + e);
       }
   }, false);       
   </script>      
</body>
</html>